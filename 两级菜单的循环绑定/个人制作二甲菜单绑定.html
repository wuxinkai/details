<!DOCTYPE html>
<html ng-app="MyCSSModule">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="css/style.css"/>
    <script type="text/javascript" src="js/angular-1.3.0.js"></script>
    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
</head>
<body ng-controller="DeathrayMenuController">
    <div class="product_sort fl">
        <h4 class="title">
            Total label classification
        </h4>
        <div class="bd">
            <div class="item " ng-repeat="ct in category">
                <div class="list">
                    <a >{{ct.expression_category}}</a>
                </div>
                <div class="arrow">&gt;</div>
                <div class="line"></div>
                <div class="subitem">
                    <div class="inner">
                        <div class="tit tit1" style="height:auto;clear:both;">
                            <div style="height:100%;display:inline-block;width:20%;font-size:20px;color:#fff;">{{ct.expression_category}}</div>
                            <div style="height:100%;display:inline-block;width:5%;text-align:left;font-size:20px;color:#fff;">></div>
                            <ul style="height:auto;width:74%;display:inline-block;margin-left:0;padding-left:0; float:right;">
                                <li ng-repeat="sc in ct.subData"> <a  style="cursor:pointer;" ng-click="subDataClick(sc.expression_subcategory)">{{sc.expression_subcategory}}</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!--添加或者删除-->
    <div class="IsSelect">
        <div class="IsSelectone" >
            <!-- 添加内容                                                                                                                                                                                                             点击删除当前的标签-->
            <div ng-repeat="ccd in checkCateData" style="width:80px;"><span style="width:50px;display:block;float:left;white-space:nowrap; text-overflow:ellipsis; -o-text-overflow:ellipsis; overflow: hidden;">{{ccd}}</span><i ng-click="deleteCheckData(ccd)">×</i></div>
        </div>
    </div>
<!--可选的内容-->
    <div class="otselect">
        <div class="otseIn">
            <div class="otseInleft">
                <span>Select Label</span>
            </div>
            <div class="otseInRiht" style="overflow:hidden">
                <a ng-class="{'active': $index==0}" ng-click="checkcateClick(ccd,$event)" style="width:70px;cursor:pointer;display:block;float:left;white-space:nowrap; text-overflow:ellipsis; -o-text-overflow:ellipsis; overflow: hidden;" class="active{{$index}}" ng-repeat="ccd in checkCateData">{{ccd}}</a>
            </div>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    var myCSSModule = angular.module('MyCSSModule', []);
    myCSSModule.controller('DeathrayMenuController', ['$scope', function($scope) {



 //数标点击后添加到另一处
        //左侧添加
        $scope.checkCateData = []; //创建数组  （如果不添加出出现替换，始终都是一个）
        $scope.subDataClick = function (cate) {
            var ary =$scope.checkCateData//赋值给变量
            if (ary.indexOf(cate)==-1) {   //避免重复添加
                ary.push(cate);
            }
            $scope.checkCateData = ary; //添加到
          var box= $scope.checkCateData.join(","); //添加内容用逗号分隔
          var box1=$scope.checkCateData[0]; //当前选择的第1个

        };
    //左侧删除
        //添加到原型的删除方法
         Array.prototype.remove = function (val) { var index = this.indexOf(val); if (index > -1) { this.splice(index, 1); } };
        $scope.deleteCheckData = function (cate) {
            $scope.checkCateData.remove(cate);

        };

    //右侧切换
        $scope.checkcateClick = function (c,$event) {  //c是当前点击的（标签里的内容）   $event 是所有标签的对象所有的信息
            $('.active').removeClass("active");  //有active 这个属性的删除 active
            $($event.target).addClass("active"); //$event.target 当前点击的这个标签加属性，添加样式
           console.log(c)

        }

//数标划过显示或者隐藏
        setTimeout(function () {
            $(".product_sort .bd .item").hover(function () {
                $(this).addClass("layer");
            }, function () {
                $(this).removeClass("layer");
            });
        },500);
//全部数据数据
        $scope.category=[
                {
                    "application_id": "www.nuomi.com",
                    "expression_type": "commercial",
                    "expression_category": "bar",
                    "expression_subcategory": "drinks",
                    subData:[
                        {
                            "expression_subcategory": "北方的女王"
                        },
                        {
                            "expression_subcategory": "浮光掠影 "
                        },
                        {
                            "expression_subcategory": "安与骑兵"
                        }
                    ]
                },
                {
                    "application_id": "www.dianping.com",
                    "expression_type": "commercial",
                    "expression_category": "Cake shop",
                    "expression_subcategory": "cake",
                    subData:[
                        {
                            "expression_subcategory": "刘明汉"
                        },
                        {
                            "expression_subcategory": "宋冬野"
                        },
                        {
                            "expression_subcategory": "马頔"
                        },
                        {
                            "expression_subcategory": "赵雷 "
                        },
                    ]
                },
                {
                    "application_id": "www.meituan.com",
                    "expression_type": "commercial",
                    "expression_category": "restaurants",
                    "expression_subcategory": "Shandong cuisine",
                    subData:[
                        {
                            "expression_subcategory": "封锁线 "
                        },
                        {
                            "expression_subcategory": "阳光中的向日葵"
                        },
                        {
                            "expression_subcategory": "洪启"
                        },
                        {
                            "expression_subcategory": "刘东明"
                        },
                        {
                            "expression_subcategory": "城市稻草人"
                        }
                    ]
                }
            ]
        }
    ])

</script>